<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>index</title>
		<meta name="description" content="" />
		<meta name="author" content="op1ekun" />

		<!-- <meta name="viewport" content="width=device-width; initial-scale=1.0" /> -->

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<script src="./deps/jquery-1.8.0.min.js"></script>
		<script src="./deps/extend.js"></script>
		<script src="./lib/ploogins.js"></script>

		<script>
			(function ($) {
				function TestPlugin() {

					console.log('Test plugin constructor arguments', arguments);

					this.string = 'A nocą w sen zagięci - w warczący wir pamięci zobaczą drwale w lęku, przykuci nocy ręką, idące na nich prosto, topory sosen ostre';

					function prvTest() {
						
						this.selector.html('prvTest returns jQuery object');
						
						return this.selector;
					}

					function publicTest() {
						
						console.log('Test plugin publicTest method arguments', arguments);
						
						this.selector.html('publicTest returns jQuery object' + this.selector.attr('data-id'));
						console.log('this', this);
						return this;
					}

					$.extend(this, {
						publicTest : publicTest
					});
				}

				TestPlugin.prototype.protoTest = function () {
					
					console.log('parent protoTest', arguments);

					this.selector.html('protoTest returns jQuery object' + this.selector.attr('data-id'));
					
					return this.selector;
				}

				$.extend(true, window, {
					TestPlugin  : TestPlugin
				});

				function AnotherPlugin(opts) {

					console.log('AnotherPlugin constructor arguments', arguments);

					TestPlugin.call(this, opts);
				}

				AnotherPlugin.prototype.protoTest = function () {

					this._super();
					this.selector.css("color", "red");

					return this.selector;
				}

				extend(AnotherPlugin, TestPlugin);

				var ploogins = window.ploogins;
				ploogins.register(TestPlugin);
				ploogins.register(AnotherPlugin);

			}(jQuery));

			$('document').ready(function() {

				$('.one').AnotherPlugin('one', 'two', 'three').
					publicTest('four', 'five', 'six').
					protoTest('seven', 'eight', 'nine');

			});

		</script>
	</head>

	<body>
		<div class="plugin one" data-id="123"></div>
		<div class="plugin two" data-id="234"></div>
		<div class="plugin three" data-id="345"></div>
	</body>
</html>